{% extends 'PerInd.template.base.html' %}

{% load static %}

{% block custom_css %}
    <link rel="stylesheet" type="text/css" href="{% static 'PMU_DjangoWebApps/DataTables/datatables.css' %}" />
    <script type="text/javascript" charset="utf8" src="{% static 'PMU_DjangoWebApps/DataTables/datatables.js' %}"></script>
{% endblock %}

{% block content %}
    <div class="navbar navbar-expand-lg">
        <!-- Collapse buttons -->
        <div>
            <a class="btn btn-primary" data-toggle="collapse" href="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
                Information: (Expand/Collapse)
            </a>
        </div>
        <!-- / Collapse buttons -->
        <!-- Collapsible element -->
        <div class="collapse" id="collapseExample">
            <div class="mt-3">
                This is the Admin Panel
            </div>
        </div>
        <!-- / Collapsible element -->
        <div class="status_info err_msg">{% if not req_success %} Error: '{{ err_msg }}'<br>Please try reloading the page again!<br>Please contact ykuang@dot.nyc.gov with a screenshot if this error continues. {% else %}{% endif %}</div>
    </div>

    <!--WebGrid-->
    <div>
        <table class="table table-striped table-hover" id="WebGridTable">
            <thead>
                <tr>
                    <th>Login</th>
                    <th>First Name</th>
                    <th>Last Name</th>
                    <th>Category</th>
                    <th>Active</th>
                </tr>
            </thead>

            <tbody>
                {% for entry in permission_data_entries %}
                <tr>
                    <td data-id="{{ entry.user_permission_id }}" data-table="Users" data-column="">{{ entry.user.login }}</td>
                    <td data-id="{{ entry.user_permission_id }}" data-table="Users" data-column="">{{ entry.user.first_name }}</td>
                    <td data-id="{{ entry.user_permission_id }}" data-table="Users" data-column="">{{ entry.user.last_name }}</td>
                    <td data-id="{{ entry.user_permission_id }}" data-table="Category" data-column="category_name">{{ entry.category.category_name }}</td>
                    <td data-id="{{ entry.user_permission_id }}" data-table="Users" data-column="">{{ entry.user.active_user }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <!--End WebGrid-->
{% endblock content %}

{% block custom_js %}
    <script>
        $(document).ready( function () {
            console.log('Ready for datatable')
            $('#WebGridTable').DataTable();
        });
    </script>
{% endblock custom_js %}